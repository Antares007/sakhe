// @flow
import type {Stream} from '@most/types'
import type {Data, VNode} from './types'

export type Action = {type: 'on', action: $FlowTODO, event: Event}

export type RVNode = (vnode: VNode, cb: (event: mixed) => void) => VNode

export type VNodeRay = {
  node(
    tag: string,
    data?: Data | Stream<Data>,
    key?: string
  ): (pith: Pith | Stream<Pith>) => void,
  text(text: string | Stream<string>): void,
  comment(text: string | Stream<string>): void,
  put(tag: string, key: string, r: Stream<RVNode>): void,
  ref(r: Stream<RVNode>): void
}
export type ActionRay = Stream<Action>

export type Pith = (put: VNodeRay, on: ActionRay) => void

export type Bark = (pith: Pith | Stream<Pith>) => Stream<RVNode>

declare export default function tree(
  tag: string,
  data?: Data | Stream<Data>
): Bark
